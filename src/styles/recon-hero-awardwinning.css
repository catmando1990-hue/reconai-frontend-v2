/* =======================================================================
   ReconAI "Intelligence Field" Hero Backdrop (v3)
   - Designed for non-home pages (dashboard/auth/legal)
   - Uses theme variables (background, primary, accent, ring, border)
   - Motion respects prefers-reduced-motion
   - Lightweight: pure CSS layers (no images), GPU-friendly transforms
   ======================================================================= */

.recon-hero-v3 {
  position: relative;
  min-height: 100dvh;
  width: 100%;
  overflow: hidden;
  background: var(--background);
}

/* Cinematic vignette */
.recon-hero-v3 .vignette {
  position: absolute;
  inset: -10%;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(
      1200px 720px at 50% 20%,
      transparent 35%,
      color-mix(in oklab, var(--background) 92%, black 8%) 78%
    ),
    radial-gradient(
      900px 600px at 20% 80%,
      transparent 40%,
      color-mix(in oklab, var(--background) 90%, black 10%) 85%
    ),
    radial-gradient(
      900px 600px at 80% 80%,
      transparent 40%,
      color-mix(in oklab, var(--background) 90%, black 10%) 85%
    );
  opacity: 0.9;
}

/* Mesh + glow field */
.recon-hero-v3::before {
  content: "";
  position: absolute;
  inset: -25%;
  pointer-events: none;
  z-index: 0;

  background:
    radial-gradient(
      900px 540px at 18% 22%,
      color-mix(in oklab, var(--primary) 28%, transparent),
      transparent 62%
    ),
    radial-gradient(
      780px 520px at 86% 30%,
      color-mix(in oklab, var(--accent) 26%, transparent),
      transparent 62%
    ),
    radial-gradient(
      880px 620px at 50% 92%,
      color-mix(in oklab, var(--ring) 22%, transparent),
      transparent 66%
    ),
    linear-gradient(
      135deg,
      color-mix(in oklab, var(--background) 92%, var(--muted) 8%),
      color-mix(in oklab, var(--background) 84%, var(--muted) 16%)
    );

  filter: saturate(1.08) contrast(1.06);
  transform: translate3d(0, 0, 0);
  opacity: 1;
}

/* Depth highlight "beam" */
.recon-hero-v3 .beam {
  position: absolute;
  left: 50%;
  top: -22%;
  width: 1400px;
  height: 860px;
  transform: translateX(-50%) rotate(10deg);
  pointer-events: none;
  z-index: 1;

  background: radial-gradient(
    circle at 50% 50%,
    color-mix(in oklab, var(--primary) 18%, transparent) 0%,
    transparent 62%
  );
  filter: blur(16px);
  opacity: 0.55;
}

/* Subtle grid mask (fades outward) */
.recon-hero-v3 .grid {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;

  background-image:
    linear-gradient(
      to right,
      color-mix(in oklab, var(--border) 38%, transparent) 1px,
      transparent 1px
    ),
    linear-gradient(
      to bottom,
      color-mix(in oklab, var(--border) 38%, transparent) 1px,
      transparent 1px
    );
  background-size: 56px 56px;
  opacity: 0.22;

  mask-image: radial-gradient(circle at 50% 20%, black 0%, transparent 70%);
}

/* Micro-noise (inline SVG turbulence) */
.recon-hero-v3 .noise {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 3;
  opacity: 0.05;
  mix-blend-mode: overlay;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
}

/* Scanline */
.recon-hero-v3 .scanline {
  position: absolute;
  left: -20%;
  right: -20%;
  height: 160px;
  top: -30%;
  pointer-events: none;
  z-index: 4;

  background: linear-gradient(
    to bottom,
    transparent,
    color-mix(in oklab, var(--foreground) 10%, transparent),
    transparent
  );
  opacity: 0.35;
  filter: blur(10px);
}

/* Content wrapper */
.recon-hero-v3 .content {
  position: relative;
  z-index: 10;
}

/* Motion: slow parallax drift + scanline sweep */
@keyframes recon-drift {
  0% {
    transform: translate3d(-6px, 0px, 0) scale(1.02);
  }
  50% {
    transform: translate3d(10px, -10px, 0) scale(1.03);
  }
  100% {
    transform: translate3d(-6px, 0px, 0) scale(1.02);
  }
}

@keyframes recon-scan {
  0% {
    transform: translateY(0) skewY(-8deg);
    opacity: 0;
  }
  10% {
    opacity: 0.35;
  }
  50% {
    opacity: 0.18;
  }
  90% {
    opacity: 0.35;
  }
  100% {
    transform: translateY(160vh) skewY(-8deg);
    opacity: 0;
  }
}

.recon-hero-v3.recon-animate::before {
  animation: recon-drift 16s ease-in-out infinite;
}

.recon-hero-v3.recon-animate .beam {
  animation: recon-drift 18s ease-in-out infinite reverse;
}

.recon-hero-v3.recon-animate .scanline {
  animation: recon-scan 9.5s linear infinite;
}

@media (prefers-reduced-motion: reduce) {
  .recon-hero-v3.recon-animate::before,
  .recon-hero-v3.recon-animate .beam,
  .recon-hero-v3.recon-animate .scanline {
    animation: none;
  }
}
